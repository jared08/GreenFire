<div class="row" ng-controller="StocksController">
  <label>List of all stocks</label>
  <table class="table">
    <thead>
      <tr>
        <th>Name</th>         
        <th>Current Price</th>      
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="stock in stocklist">
        <td>{{stock.name}}</td>
        <td>{{stock.current_price}}</td>
	<td>
	  <button class="btn btn-primary" ng-click="setStock(stock)" data-toggle="modal" data-target="#buyStockModal">Buy</button>
	</td>
	<td>
          <div ng-hide={{!is_admin}}>
            <button class="btn btn-warning" ng-click="setStock(stock)" data-toggle="modal" data-target="#editStockModal">Edit Stock</button>
          </div>
        </td>
	<td>
	  <div ng-hide={{!is_admin}}>
    	    <button class="btn btn-danger" ng-click="setStock(stock)" data-toggle="modal" data-target="#deleteStockModal">Delete Stock</button>
	  </div>
	</td>
      </tr>
    </tbody>
  </table>

  <div ng-hide={{!is_admin}}>
    <button class="btn btn-success" data-toggle="modal" data-target="#addStockModal">Add Stock</button>
  </div>

  <h3>Available funds: {{cash}}</h3>
  <h3>Account value: {{value}}</h3>
  <label>My stocks</label>
  <table class="table">
    <thead>
      <tr>
        <th>Name</th>
	<th>Quantity</th>
        <th>Price of Purchase</th>
	<th>Current Price</th>
	<th>Current Balance</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="stock in mystocklist">
        <td>{{stock.name}}</td>
	<td>{{stock.quantity}}</td>
        <td>{{stock.price_of_purchase}}</td>
	<td>{{stock.current_price}}</td>
	<td>{{stock.current_price * stock.quantity}}</td>
	<td><button class="btn btn-success" ng-click="setStock(stock)" data-toggle="modal" data-target="#buyStockModal">Buy</button></td>
	<td><button class="btn btn-danger" ng-click="setStock(stock)" data-toggle="modal" data-target="#sellStockModal">Sell</button></td>
      </tr>
    </tbody>
  </table>

  <div class="modal" id="buyStockModal" role="dialog">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Buy Stock</h4>
        </div>
        <div class="modal-body">
          <label>Quantity</label>
          <input id="buy_input" type="number" class="form-control" name="price" ng-model="stock.quantity" required>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-default" data-dismiss="modal"  ng-click="buyStock()">Buy</button>
        </div>
      </div>
    </div>
  </div>

    <div class="modal" id="sellStockModal" role="dialog">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Sell Stock</h4>
        </div>
        <div class="modal-body">
          <label>Quantity</label>
          <input id="sell_input" type="number" class="form-control" name="price" ng-model="stock.quantity" required>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-default" data-dismiss="modal"  ng-click="sellStock()">Sell</button>
        </div>
      </div>
    </div>
  </div>


  <div class="modal" id="addStockModal" role="dialog">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Add Stock</h4>
        </div>
        <div class="modal-body">  
          <label>Name</label>
          <input type="text" class="form-control" name="name" ng-model="new_stock.name" required>
          <label>Price</label>
          <input type="number" class="form-control" name="price" ng-model="new_stock.price" required>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="addStock()">Add</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="editStockModal" role="dialog">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Edit Stock</h4>
        </div>
        <div class="modal-body">
          <label>New Name</label>
          <input type="text" class="form-control" name="new name" ng-model="stock.new_name" required>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="editStock()">Submit</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="deleteStockModal" role="dialog">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Delete Stock</h4>
        </div>
        <div class="modal-body">
          <label>Are you absolutely sure you want to delete this stock?</label>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="deleteStock()">Confirm</button>
        </div>
      </div>
    </div>
  </div>

</div>

